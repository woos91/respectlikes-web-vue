<script setup lang="ts">
import { onMounted, ref } from 'vue';

const _this = ref<HTMLElement | null>(null)

onMounted (()=>{
    setStrokeDashs();
});

let svg, paths;
function setStrokeDashs() {
    svg = _this.value;
    if (!svg) return;
    paths = svg.querySelectorAll("path");
    paths.forEach((path, i) => {
        path.style.transitionDelay = String(i*50+500) + "ms";
    });
}
</script>

<template>
<svg ref="_this" version="1.1" id="about_img_bg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 862 466.32" style="enable-background:new 0 0 862 466.32;" vector-effect="non-scaling-stroke" xml:space="preserve">
    <path id="flash1" d="M231.3,162.38c3.25-3.25,3.36-10.13,3.36-10.13s0.58,6.68,4.04,10.13,c3.46,3.46,8.72,2.88,8.72,2.88s-6.22-0.41-8.53,1.89s-3.35,10.23-3.35,10.23s-0.14-6.41-3.67-9.95c-3.54-3.54-9.21-3.19-9.21-3.19,S229.12,164.57,231.3,162.38z"/>
    <path id="flash2" d="M826.1,405.05c5.5,5.5,17.17,5.7,17.17,5.7s-11.31,0.99-17.17,6.85,c-5.86,5.86-4.87,14.77-4.87,14.77s0.7-10.54-3.21-14.45c-3.91-3.91-17.34-5.67-17.34-5.67s10.86-0.23,16.85-6.22,s5.41-15.61,5.41-15.61S822.39,401.34,826.1,405.05z"/>
    <path id="flash3" d="M646.28,22.33c-3.33-3.33-3.44-10.38-3.44-10.38s-0.6,6.84-4.14,10.38,c-3.54,3.54-8.93,2.95-8.93,2.95s6.37-0.42,8.73,1.94s3.43,10.48,3.43,10.48s0.14-6.56,3.76-10.18s9.43-3.27,9.43-3.27,S648.52,24.57,646.28,22.33z"/>
    <g id="light">
        <path d="M101.04,96.53c-2.65,1.53-5.82,2.9-9.41,3.4c-3.7,0.52-7.84,0.12-12.29-1.97C70.6,93.84,66.14,81.31,67.48,75,c1.35-6.3,2.69-12.61,11.52-19.25s24.47-4.88,30.44,4.88C115.41,70.38,114.6,88.74,101.04,96.53c0,0-3.9-5.64-7.44-8.47,s-10.5-6.63-10.5-6.63s3.86,0.45,4.25-1.09c0.39-1.55,0.39-2.81-0.71-4.37c-1.09-1.56-1.67,0.31-0.97,1.21,c0.71,0.9,3.28,1.61,3.99-0.19s0.45-4.38-0.71-4.89s0.68,1.44,1.08-0.18s-1.34-2.55-1.34-2.55s2.02,0.14,4.69,7.8,S101.04,96.53,101.04,96.53c-2.65,1.53-5.82,2.9-9.41,3.4c0,0,1.12,3.7,5.04,2.43c2.68-0.87,4.58-1.69,6.4-2.83,s6.14-4.07,7.46-5.43s0.98-5-0.95-6.22c1.93,1.21,2.27,4.86,0.95,6.22c0,0,1.47,3.31-1,5.32c-1.36,1.11-2.75,1.93-3.96,2.5,s-2.89,1.46-4.64,1.96s-3.33-0.53-4.25-1.53c0.93,1,2.5,2.03,4.25,1.53c0,0,1.51,1.16,2.82,1.29c2.86,0.29,5.13-1.18,5.71-2.68,c0.57-1.5,0.08-3.07,0.08-3.07"/>
        <path d="M92.72,57.31c10.81-0.72,14.5,9.73,14.95,15.04"/>
        <path d="M79.84,105.21c0.09,5.87-1.17,12.99-2.16,16.32"/>
        <path d="M73.53,105.21c-0.9,2.27-2.43,4.43-2.43,4.43"/>
        <path d="M69.72,98.71c-2.38,5.76-8.43,12.18-13.52,16.1"/>
        <path d="M65.42,94.91c-0.21,1.21-5.26,4.92-5.26,4.92"/>
        <path d="M62.5,88.32c-3.63,2.88-12.14,7.84-19.52,9.3"/>
        <path d="M60.33,81.86c-2.63,1.13-4.3,1.79-7.38,2.38"/>
        <path d="M60.33,73.18c-5.97,2.79-12.93,4.38-17.85,5.01"/>
        <path d="M52.74,62.25c-0.29-1.38,4.34-0.11,10.93,1.75"/>
        <path d="M65.46,55.49c-5.63-5.46-9.26-8.63-15.52-11.35"/>
        <path d="M73.39,51.03c-1.67-2.92-6.47-8.3-6.47-8.3"/>
        <path d="M78.35,45.36c-2.29-9.3-4.46-16.23-5.17-19.23s0.21-5.05,0.21-5.05"/>
        <path d="M85.65,33.89c1.33,1.92,1.25,8.05,1.08,11.01"/>
        <path d="M96.58,46.07c0.62-9.6,2.42-22.97,3.04-26.16"/>
        <path d="M102.42,47.38c1.5-4.09,2.88-6.67,5.42-9.43"/>
        <path d="M107.84,52.1c7.09-7.68,17.56-16.39,25.86-20.94"/>
        <path d="M114.14,58.98c5.8-4.84,11.64-6.88,11.64-6.88"/>
        <path d="M117.35,68.2c8.89-1.33,22.4-3.92,22.4-3.92"/>
        <path d="M118.98,76.41c-0.5,1.04,0.04,1.29,1.75,1.33s5.17,0.92,5.17,0.92"/>
        <path d="M118.06,86.18c4.34,0.63,17.44,4.46,17.44,4.46"/>
    </g>
    <path id="cloud2" d="M745.35,82.46c0,0-1.94-6.22,5.36-11.46c7.3-5.23,23.51-2.82,26.24,4.59s-2.03,12.87-2.03,12.87
	s10.69,4.52,13.56,13.4c2.86,8.88-2.13,24.42-12.52,28.33c-10.39,3.91-20.48-6.6-20.48-6.6s-12.26,3.4-21.33-4.92
	c-3.87-4.91-8.85-17.91-4.47-27.58C734.06,81.43,745.35,82.46,745.35,82.46z"/>
    <path id="cloud1" d="M506.73,347.91c-6.74-22-24.14-25.62-24.14-25.62s3.69-20.88-9.15-35.9,c-12.84-15.02-53.31-17.92-70.17-12.45s-23.19,24.57-23.19,24.57s-4.74-13.44-53.76-17.36c-49.01-3.92-67.2,43.98-66.03,62.69,c0.18,2.91,1.01,5.7,2.27,8.35l0,0c0,0-27.55,7.95-27.53,36.14c0.03,34.46,39.06,52.62,62.63,50.12c0,0,18.13-7.14,18.14-7.14,c25.42,25.86,58.53,27.49,80.06,20.18c16.82-5.71,26.76-27.64,26.76-27.64s24.92,13.8,53.9-7.28,C505.52,395.49,513.47,369.91,506.73,347.91z"/>
</svg>

</template>

<style>
#about_img_bg {
    width: 100%;
    height: auto;
}

#about_img_bg path {
    fill:none;
    stroke:rgba(255,255,255,1);
    stroke-width:1px;
    stroke-linecap:round;
    stroke-linejoin:round;
    stroke-miterlimit:10;
    vector-effect: non-scaling-stroke;
    stroke-dasharray: 1220;
    stroke-dashoffset: 1220;
    opacity:0;
    transition: all 1s;
}

._active #about_img_bg path {
    opacity:1;
    stroke-dashoffset: 0;
    transition: stroke-dashoffset 1.8s linear;
}
</style>